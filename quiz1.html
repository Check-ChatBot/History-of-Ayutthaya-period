<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>History of Ayutthaya period</title>
  <link rel="icon" type="image/png" sizes="16x16" href="logo.png"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(135deg, #fceabb, #f8b500);
      font-family: "Prompt", sans-serif;
      padding: 30px;
    }
    .quiz-box {
      background: #fff;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.25);
      max-width: 900px;
      margin: auto;
      animation: fadeIn 0.6s ease;
    }
    .question {
      font-size: 1.3rem;
      font-weight: bold;
      margin-bottom: 20px;
    }
    .option {
      background: #f7f7f7;
      border: 2px solid transparent;
      border-radius: 12px;
      padding: 12px;
      margin-bottom: 12px;
      cursor: pointer;
      transition: 0.3s;
      animation: fadeIn 0.5s ease;
    }
    .option:hover { background: #e9ecef; transform: scale(1.02); }
    .option.correct { border-color: green; background: #d4edda; animation: pulse 0.5s; }
    .option.wrong { border-color: red; background: #f8d7da; animation: shake 0.4s; }
    .progress { height: 20px; margin-bottom: 20px; }
    .timer { font-size: 1.2rem; font-weight: bold; color: #d63384; }
    @keyframes fadeIn { from {opacity: 0; transform: translateY(20px);} to {opacity: 1; transform: translateY(0);} }
    @keyframes pulse { 0%{transform:scale(1);}50%{transform:scale(1.1);}100%{transform:scale(1);} }
    @keyframes shake { 0%{transform:translateX(0);}25%{transform:translateX(-5px);}50%{transform:translateX(5px);}75%{transform:translateX(-5px);}100%{transform:translateX(0);} }
    table th, table td { text-align:center; vertical-align: middle; }
    
    body {
  font-family: 'Prompt', sans-serif;
}

.fancy-btn {
  background: linear-gradient(45deg, #f7971e, #ffd200);
  border: none;
  border-radius: 30px;
  padding: 12px 24px;
  font-size: 1.05rem;
  font-weight: 600;
  color: #fff !important;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  transition: all 0.3s ease-in-out;
  display: inline-block;
  text-decoration: none;
}

.fancy-btn:hover {
  transform: translateY(-3px) scale(1.05);
  box-shadow: 0 6px 20px rgba(0,0,0,0.3);
  background: linear-gradient(45deg, #ffd200, #f7971e);
  color: #fff;
}

.fancy-btn:active {
  transform: scale(0.95);
  box-shadow: none;
}

  </style>
</head>
<body>

<div class="quiz-box">
  <h2 class="text-center mb-4">üìù‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö : ‡∏ö‡∏ó‡∏ó‡∏µ‡πà 1 ‡∏Å‡∏≤‡∏£‡∏™‡∏ñ‡∏≤‡∏õ‡∏ô‡∏≤‡∏Å‡∏£‡∏∏‡∏á‡∏®‡∏£‡∏µ‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤</h2>

  <!-- Progress -->
  <div class="d-flex justify-content-between mb-2">
    <div>‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà <span id="currentQ">1</span>/<span id="totalQ"></span></div>
    <div class="timer">‚è≥ <span id="timeLeft">15</span>s</div>
  </div>
  <div class="progress">
    <div id="progressBar" class="progress-bar bg-success" role="progressbar" style="width: 0%"></div>
  </div>

  <!-- ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° -->
  <div id="quizContainer"></div>

  <!-- ‡∏õ‡∏∏‡πà‡∏° -->
  <div class="mt-3 text-center">
    <button id="nextBtn" class="btn btn-primary" disabled>‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚û°</button>
  </div>

  <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå -->
  <div class="mt-4" id="resultBox" style="display:none;"></div>

<script>
const questions = [
  { question: "‡∏Å‡∏©‡∏±‡∏ï‡∏£‡∏¥‡∏¢‡πå‡∏û‡∏£‡∏∞‡∏≠‡∏á‡∏Ñ‡πå‡πÉ‡∏î‡∏ó‡∏£‡∏á‡∏™‡∏ñ‡∏≤‡∏õ‡∏ô‡∏≤‡∏Å‡∏£‡∏∏‡∏á‡∏®‡∏£‡∏µ‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏≤‡∏ä‡∏ò‡∏≤‡∏ô‡∏µ?", options: ["‡∏™‡∏°‡πÄ‡∏î‡πá‡∏à‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏°‡∏≤‡∏ò‡∏¥‡∏ö‡∏î‡∏µ‡∏ó‡∏µ‡πà 1 (‡∏û‡∏£‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏≠‡∏π‡πà‡∏ó‡∏≠‡∏á)", "‡∏™‡∏°‡πÄ‡∏î‡πá‡∏à‡∏û‡∏£‡∏∞‡∏ö‡∏£‡∏°‡πÑ‡∏ï‡∏£‡πÇ‡∏•‡∏Å‡∏ô‡∏≤‡∏ñ", "‡∏™‡∏°‡πÄ‡∏î‡πá‡∏à‡∏û‡∏£‡∏∞‡∏°‡∏´‡∏≤‡∏à‡∏±‡∏Å‡∏£‡∏û‡∏£‡∏£‡∏î‡∏¥", "‡∏™‡∏°‡πÄ‡∏î‡πá‡∏à‡∏û‡∏£‡∏∞‡∏ô‡πÄ‡∏£‡∏®‡∏ß‡∏£‡∏°‡∏´‡∏≤‡∏£‡∏≤‡∏ä"], answer: "‡∏™‡∏°‡πÄ‡∏î‡πá‡∏à‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏°‡∏≤‡∏ò‡∏¥‡∏ö‡∏î‡∏µ‡∏ó‡∏µ‡πà 1 (‡∏û‡∏£‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏≠‡∏π‡πà‡∏ó‡∏≠‡∏á)" },
  { question: "‡∏Å‡∏£‡∏∏‡∏á‡∏®‡∏£‡∏µ‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤‡∏™‡∏ñ‡∏≤‡∏õ‡∏ô‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡πÉ‡∏ô‡∏õ‡∏µ ‡∏û.‡∏®. ‡πÉ‡∏î?", options: ["‡∏û.‡∏®. 1781", "‡∏û.‡∏®. 1893", "‡∏û.‡∏®. 1991", "‡∏û.‡∏®. 2010"], answer: "‡∏û.‡∏®. 1893" },
  { question: "‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏Å‡∏£‡∏∏‡∏á‡∏®‡∏£‡∏µ‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏≤‡∏ä‡∏ò‡∏≤‡∏ô‡∏µ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?", options: ["‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏∏‡∏î‡∏°‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏≤‡∏ö‡∏•‡∏∏‡πà‡∏°‡πÅ‡∏°‡πà‡∏ô‡πâ‡∏≥", "‡πÄ‡∏õ‡πá‡∏ô‡∏î‡∏¥‡∏ô‡πÅ‡∏î‡∏ô‡πÉ‡∏Å‡∏•‡πâ‡∏†‡∏π‡πÄ‡∏Ç‡∏≤‡∏™‡∏π‡∏á ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ç‡πâ‡∏≤‡∏®‡∏∂‡∏Å", "‡∏°‡∏µ‡∏ó‡∏∞‡πÄ‡∏•‡∏•‡πâ‡∏≠‡∏°‡∏£‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å‡∏î‡πâ‡∏≤‡∏ô", "‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÄ‡∏Ç‡∏ï‡∏õ‡πà‡∏≤‡∏î‡∏á‡∏î‡∏¥‡∏ö"], answer: "‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏∏‡∏î‡∏°‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏≤‡∏ö‡∏•‡∏∏‡πà‡∏°‡πÅ‡∏°‡πà‡∏ô‡πâ‡∏≥" },
  { question: "‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏∞‡∏™‡∏ñ‡∏≤‡∏õ‡∏ô‡∏≤‡∏Å‡∏£‡∏∏‡∏á‡∏®‡∏£‡∏µ‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤ ‡∏û‡∏£‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏≠‡∏π‡πà‡∏ó‡∏≠‡∏á‡πÄ‡∏Ñ‡∏¢‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÉ‡∏î‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô?", options: ["‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏∏‡∏£‡∏µ", "‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏•‡∏∞‡πÇ‡∏ß‡πâ (‡∏•‡∏û‡∏ö‡∏∏‡∏£‡∏µ)", "‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏≠‡∏π‡πà‡∏ó‡∏≠‡∏á", "‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏û‡∏¥‡∏à‡∏¥‡∏ï‡∏£"], answer: "‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏≠‡∏π‡πà‡∏ó‡∏≠‡∏á" },
  { question: "‡∏Å‡∏£‡∏∏‡∏á‡∏®‡∏£‡∏µ‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡∏£‡∏∏‡πà‡∏á‡πÄ‡∏£‡∏∑‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏ñ‡∏≤‡∏õ‡∏ô‡∏≤‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏´‡∏ï‡∏∏‡πÉ‡∏î?", options: ["‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏á‡πÅ‡∏£‡πà‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà", "‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Ñ‡∏°‡∏ô‡∏≤‡∏Ñ‡∏°‡∏ó‡∏≤‡∏á‡∏ô‡πâ‡∏≥‡∏™‡∏∞‡∏î‡∏ß‡∏Å", "‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏à‡∏≤‡∏Å‡∏ù‡∏£‡∏±‡πà‡∏á‡πÄ‡∏®‡∏™", "‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ï‡∏¥‡∏î‡∏ä‡∏≤‡∏¢‡∏ó‡∏∞‡πÄ‡∏•‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á"], answer: "‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Ñ‡∏°‡∏ô‡∏≤‡∏Ñ‡∏°‡∏ó‡∏≤‡∏á‡∏ô‡πâ‡∏≥‡∏™‡∏∞‡∏î‡∏ß‡∏Å" }
];

let current = 0;
let score = 0;
let timer;
let timeLimit = 15;
let userAnswers = [];

document.getElementById("totalQ").innerText = questions.length;

function startTimer() {
  let time = timeLimit;
  document.getElementById("timeLeft").innerText = time;
  timer = setInterval(() => {
    time--;
    document.getElementById("timeLeft").innerText = time;
    if (time <= 0) {
      clearInterval(timer);
      lockOptions();
      document.getElementById("nextBtn").disabled = false;
    }
  }, 1000);
}

function showQuestion(index) {
  clearInterval(timer);
  startTimer();

  document.getElementById("currentQ").innerText = index+1;
  document.getElementById("progressBar").style.width = ((index)/questions.length*100)+"%";

  const q = questions[index];
  let html = `<p class="question">${q.question}</p>`;
  q.options.forEach(opt => {
    html += `<div class="option" onclick="selectOption(this, '${opt}')">${opt}</div>`;
  });
  document.getElementById("quizContainer").innerHTML = html;
  document.getElementById("nextBtn").disabled = true;
}

function selectOption(el, answer) {
  const q = questions[current];
  const options = document.querySelectorAll(".option");
  options.forEach(opt => opt.onclick = null); // disable clicks

  userAnswers[current] = answer;

  if (answer === q.answer) {
    el.classList.add("correct");
    score++;
  } else {
    el.classList.add("wrong");
    options.forEach(opt => {
      if (opt.innerText === q.answer) opt.classList.add("correct");
    });
  }
  clearInterval(timer);
  document.getElementById("nextBtn").disabled = false;
}

function lockOptions() {
  const q = questions[current];
  const options = document.querySelectorAll(".option");
  options.forEach(opt => {
    opt.onclick = null;
    if (opt.innerText === q.answer) opt.classList.add("correct");
  });
}

document.getElementById("nextBtn").addEventListener("click", () => {
  if (current < questions.length-1) {
    current++;
    showQuestion(current);
  } else {
    showResult();
  }
});

function showResult() {
  document.getElementById("quizContainer").style.display = "none";
  document.getElementById("nextBtn").style.display = "none";
  document.querySelector(".progress").style.display = "none";
  document.querySelector(".timer").style.display = "none";

  const username = localStorage.getItem("username") || "‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏";

  let resultHTML = `
    <div class="card shadow-lg p-4">
      <h3 class="text-center text-success">üéâ ‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!</h3>
      <p class="text-center">‡∏ú‡∏π‡πâ‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö: <strong>${username}</strong></p>
      <p class="text-center">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: 
        <strong class="text-primary" style="font-size: 1.5rem;">
          ${score}/${questions.length}
        </strong>
      </p>

      <table class="table table-striped table-bordered mt-4">
        <thead class="thead-dark">
          <tr>
            <th scope="col">‡∏Ç‡πâ‡∏≠</th>
            <th scope="col">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</th>
            <th scope="col">‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</th>
          </tr>
        </thead>
        <tbody>
  `;

  // ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ç‡πâ‡∏≠
  questions.forEach((q, i) => {
    const userAns = userAnswers[i] || "-";
    const isCorrect = userAns === q.answer;
    const rowClass = isCorrect ? "table-success" : "table-danger";

    resultHTML += `
      <tr class="${rowClass}">
        <td>${i + 1}</td>
        <td>${q.question}</td>
        <td>${userAns}</td>
      </tr>
    `;
  });

    resultHTML += `
        </tbody>
      </table>

      <div class="text-center mt-4">
  <button class="btn fancy-btn mr-2" onclick="location.reload()">üîÅ ‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà</button>
  <a href="index.html" class="btn fancy-btn mr-2">üè† ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å</a>
  <a href="learning.html" class="btn fancy-btn">‚û°Ô∏è ‡πÑ‡∏õ‡∏ö‡∏ó‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</a>
</div>`;

  document.getElementById("resultBox").innerHTML = resultHTML;
  document.getElementById("resultBox").style.display = "block";

  const scores = JSON.parse(localStorage.getItem("quizScores") || "[]");
  scores.push({
    lesson: "‡∏ö‡∏ó‡∏ó‡∏µ‡πà 1 ‡∏Å‡∏≤‡∏£‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡∏™‡∏°‡∏±‡∏¢‡∏Å‡∏£‡∏∏‡∏á‡∏®‡∏£‡∏µ‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤",
    score: `${score}/${questions.length}`,
    date: new Date().toLocaleDateString('th-TH')
  });
  localStorage.setItem("quizScores", JSON.stringify(scores));

}

document.addEventListener("DOMContentLoaded", function() {
  showQuestion(current);
});

</script>
</body>
</html>